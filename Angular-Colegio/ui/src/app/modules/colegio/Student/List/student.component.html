<div class="container">
  <div *ngIf="inListStudent" class="animated fadeInUp">
    <div class= "col-12 common-box-extra-large">
      <div class="row">
        <div class="col-12 body-component">
          <div *ngIf="showMessageError" class="row error-box animated fadeInDown">
            <div class="col-1 error-box-icon">
              <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
            </div>
            <div *ngIf="showMessageErrorService" class="col-11 error-box-message">
              {{messageErrorService}}
            </div>
          </div>
          <p-dataScroller [value]="students" [rows]="7" class="data-scroller-two-columns" (onLazyLoad)="loadData($event)" [lazy]="true">
            <p-header>
              <div class="list-student-header">
                Alumnos
              </div>
              <div class="filter-container">
                <div class="filter-by-year"> 
                  <span class="filter-by-name-year">Filtrado por division</span>
                  <p-dropdown [options]="filterDivisionOptions" [(ngModel)]="filterDivision" class="input-filter-by-year"></p-dropdown>
                </div>
                <div class="filter-by-level"> 
                  <span class="filter-by-name-level">Filtrado por nivel</span>
                  <p-dropdown [options]="filterLevelsOptions" [(ngModel)]="filterLevel" class="input-filter-by-level"></p-dropdown>
                </div>
                <div class="filter-by-year"> 
                  <span class="filter-by-name-year">Filtrado por año</span>
                  <p-dropdown [options]="filterYearOptions" [(ngModel)]="filterYear" class="input-filter-by-year"></p-dropdown>
                </div>
                <div class="filter-by-name"> 
                  <span class="filter-by-name-student">Filtrado por nombre</span>
                  <input class="input-filter-by-name-student" type="text" pInputText [(ngModel)]="filterName"/>
                </div>
              </div>
              <button type="button" class="button-add" (click)="goListCreate(false)" *ngIf="!inPaymentRecord">
                  <i class="fa fa-plus" aria-hidden="true"></i>
              </button>
            </p-header>
            
            <p-footer *ngIf="!moreStudents">
              <div class="no-more-data">    
                No hay mas alumnos.
              </div>
            </p-footer>
            
            <p-footer *ngIf="students.length == 0">
              <div class="no-data-footer">
                No hay alumnos cargados...
              </div>
            </p-footer>

            <p-footer *ngIf="loading">
                <div class="loading-footer">
                  <loading-commons></loading-commons>
                </div>
            </p-footer>
            
            <ng-template let-student pTemplate="item">
              <div class="data-scroller-item-1-container" (click)="loadStudent(student)">
                <div class="data-scroller-item-1-title">
                  {{student.name}} {{student.surname}}
                </div>
                <div class="data-scroller-item-1-photo">
                  <img src="src/assets/images/user-image.png" class="student-photo"/>
                </div>
                <div class="data-scroller-item-1-body">
                  <div class="data-scroller-item-1-body-data">
                    {{student.documentType}}: {{student.documentNumber}}
                  </div>
                  <div class="data-scroller-item-1-body-data">
                    <!--{{student.course.level}}-->
                  </div>
                  <div class="data-scroller-item-1-body-data">
                    <!--{{student.course.year}}° {{student.course.division}}-->
                  </div>
                </div>
                  
              </div>      
            </ng-template>

          </p-dataScroller>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="inCreateStudent" class="animated fadeInUp">
    <school-students-create (goList)="goListCreate($event)" [inEdit]="false"></school-students-create>
  </div>
  <div *ngIf="inUpdateStudent" class="animated fadeInUp">
    <school-students-create (goList)="goListUpdate($event)" [student]="selectedStudent" [inEdit]="true"></school-students-create>
  </div>
  <div *ngIf="showPaymentRecord" class="animated fadeInUp">
    <school-students-create (goList)="goListPaymentRecord($event)" [student]="selectedStudent"></school-students-create>
  </div>
</div>

<div class="modal animated fadeIn" [ngStyle]="{'display': displayLoading}">
  <table class="table-loading">
    <tr>
      <td>
        <loading-commons class="loading-class" [fontSize]="50"></loading-commons>
      </td>
    </tr>
  </table>
</div>